[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "MINI Project 00",
    "section": "",
    "text": "** Maria Alexandra Jerez**"
  },
  {
    "objectID": "mp01.html",
    "href": "mp01.html",
    "title": "Mini-Project #01: Fiscal Characteristics of Major US Public Transit Systems",
    "section": "",
    "text": "```{r}\nif(!require(\"tidyverse\")) install.packages(\"tidyverse\")\n# Let's start with Fare Revenue\nlibrary(tidyverse)\nif(!file.exists(\"2022_fare_revenue.xlsx\")){\n# This should work _in theory_ but in practice it's still a bit finicky\n# If it doesn't work for you, download this file 'by hand' in your\n# browser and save it as \"2022_fare_revenue.xlsx\" in your project\n# directory.\ndownload.file(\"http://www.transit.dot.gov/sites/fta.dot.gov/files/2024-04/2022%20Fare%20Revenue.xlsx\",\ndestfile=\"2022_fare_revenue.xlsx\",\nquiet=FALSE,\nmethod=\"wget\")\n}\nFARES &lt;- readxl::read_xlsx(\"2022_fare_revenue.xlsx\") |&gt;\nselect(-`State/Parent NTD ID`,\n-`Reporter Type`,\n-`Reporting Module`,\n-`TOS`,\n-`Passenger Paid Fares`,\n-`Organization Paid Fares`) |&gt;\nfilter(`Expense Type` == \"Funds Earned During Period\") |&gt;\nselect(-`Expense Type`) |&gt;\ngroup_by(`NTD ID`,       # Sum over different `TOS` for the same `Mode`\n`Agency Name`,  # These are direct operated and sub-contracted\n`Mode`) |&gt;      # of the same transit modality\n# Not a big effect in most munis (significant DO\n# tends to get rid of sub-contractors), but we'll sum\n# to unify different passenger experiences\nsummarize(`Total Fares` = sum(`Total Fares`)) |&gt;\nungroup()\n# Next, expenses\nif(!file.exists(\"2022_expenses.csv\")){\n# This should work _in theory_ but in practice it's still a bit finicky\n# If it doesn't work for you, download this file 'by hand' in your\n# browser and save it as \"2022_expenses.csv\" in your project\n# directory.\ndownload.file(\"https://data.transportation.gov/api/views/dkxx-zjd6/rows.csv?date=20231102&accessType=DOWNLOAD&bom=true&format=true\",\ndestfile=\"2022_expenses.csv\",\nquiet=FALSE,\nmethod=\"wget\")\n}\nEXPENSES &lt;- readr::read_csv(\"2022_expenses.csv\") |&gt;\nselect(`NTD ID`,\n`Agency`,\n`Total`,\n`Mode`) |&gt;\nmutate(`NTD ID` = as.integer(`NTD ID`)) |&gt;\nrename(Expenses = Total) |&gt;\ngroup_by(`NTD ID`, `Mode`) |&gt;\nsummarize(Expenses = sum(Expenses)) |&gt;\nungroup()\nFINANCIALS &lt;- inner_join(FARES, EXPENSES, join_by(`NTD ID`, `Mode`))\n# Monthly Transit Numbers\nlibrary(tidyverse)\nif(!file.exists(\"ridership.xlsx\")){\n# This should work _in theory_ but in practice it's still a bit finicky\n# If it doesn't work for you, download this file 'by hand' in your\n# browser and save it as \"ridership.xlsx\" in your project\n# directory.\ndownload.file(\"https://www.transit.dot.gov/sites/fta.dot.gov/files/2024-09/July%202024%20Complete%20Monthly%20Ridership%20%28with%20adjustments%20and%20estimates%29_240903.xlsx\",\ndestfile=\"ridership.xlsx\",\nquiet=FALSE,\nmethod=\"wget\")\n}\nTRIPS &lt;- readxl::read_xlsx(\"ridership.xlsx\", sheet=\"UPT\") |&gt;\nfilter(`Mode/Type of Service Status` == \"Active\") |&gt;\nselect(-`Legacy NTD ID`,\n-`Reporter Type`,\n-`Mode/Type of Service Status`,\n-`UACE CD`,\n-`TOS`) |&gt;\npivot_longer(-c(`NTD ID`:`3 Mode`),\nnames_to=\"month\",\nvalues_to=\"UPT\") |&gt;\ndrop_na() |&gt;\nmutate(month=my(month)) # Parse _m_onth _y_ear date specs\nMILES &lt;- readxl::read_xlsx(\"ridership.xlsx\", sheet=\"VRM\") |&gt;\nfilter(`Mode/Type of Service Status` == \"Active\") |&gt;\nselect(-`Legacy NTD ID`,\n-`Reporter Type`,\n-`Mode/Type of Service Status`,\n-`UACE CD`,\n-`TOS`) |&gt;\npivot_longer(-c(`NTD ID`:`3 Mode`),\nnames_to=\"month\",\nvalues_to=\"VRM\") |&gt;\ndrop_na() |&gt;\ngroup_by(`NTD ID`, `Agency`, `UZA Name`,\n`Mode`, `3 Mode`, month) |&gt;\nsummarize(VRM = sum(VRM)) |&gt;\nungroup() |&gt;\nmutate(month=my(month)) # Parse _m_onth _y_ear date specs\nUSAGE &lt;- inner_join(TRIPS, MILES) |&gt;\nmutate(`NTD ID` = as.integer(`NTD ID`))\ndistinct(USAGE)\nUSAGE &lt;- USAGE |&gt;\nmutate(Mode=case_when(\nMode == \"DR\" ~ \"Demand Response\",\nTRUE ~ \"Unknown\"))\nrename(USAGE, c(\"metro_area\" = \"UZA Name\", \"Unlinked Passenger Trips\"=\"UPT\",\"Vehicle Revenue Miles\"=\"VRM\"))\nif(!require(\"DT\")) install.packages(\"DT\")\nlibrary(DT)\nsample_n(USAGE, 1000) |&gt;\nmutate(month=as.character(month)) |&gt;\nDT::datatable()\n```\n\nWhat transit agency had the most total VRM in our data set?\n\n\n\nMTA New York City Transit\n10832855350\n\n\n\nWhat transit mode had the most total VRM in our data set?\n\n\n\nUnknown\n79125728755\n\n\n\nHow many trips were taken on the NYC Subway (Heavy Rail) in May 2024?\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n20008\nMTA New York City Transit\nNew York–Jersey City–Newark, NY–NJ\nUnknown\nRail\n2024-05-01\n180458819\n30042876\n3 Mode"
  }
]